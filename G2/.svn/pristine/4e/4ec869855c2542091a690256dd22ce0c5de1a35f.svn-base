package main;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.nio.file.Files;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Vector;

import javax.swing.ComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JTable;
import javax.swing.ListModel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

import com.lowagie.text.Table;
import com.sun.corba.se.spi.orbutil.fsm.Action;
import com.sun.glass.ui.TouchInputSupport;
import com.sun.glass.ui.View;

import controller.TableSelectionController;
import helpers.AutoCompletion;
import helpers.DatabaseConnection;
import helpers.TableXmlParser;
import model.TableColumn;
import model.TableDataModel;
import model.TableFormModel;
import view.BasicField;
import view.DateField;
import view.InsertUpdateView;
import view.TableFieldInterface;
import view.TableToolbar;
import view.TableView;

public class TestB {
	public static void main(String[] args) {
		try {
			UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
		} catch (ClassNotFoundException | InstantiationException | IllegalAccessException
				| UnsupportedLookAndFeelException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		JFrame mainframe = new JFrame("Test");
		mainframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		mainframe.setSize(1366, 768);
		mainframe.setLayout(new FlowLayout());

		// -----------------------------------------------------------------------

		TableFormModel model = new TableFormModel("Istorija Izdavanja");
		TableColumn col = model.getTableDataModel().getColumnByName("II_Datum izdavanja");
		mainframe.add(new DateField(col));
		mainframe.setVisible(true);

		JButton button = new JButton("Get Value");
		mainframe.add(button);

		// --------------------------------------------
//		mainframe.setVisible(true);
	}

	public static void getObject() {
		Long start = System.currentTimeMillis();
		File dir = new File("resources");
		File[] files = dir.listFiles();

		Vector<TableDataModel> tables = new Vector<>();
		TableXmlParser parser = new TableXmlParser();
		for (File f : files) {
			System.out.println(f.getName().replaceAll(".xml", ""));
			TableDataModel model = parser.getTable(f.getName().replaceAll(".xml", ""));
			model.fetchData();
			tables.add(model);
//			break;
		}
		System.out.println(System.currentTimeMillis() - start);
	}

	class DugmeListener implements ActionListener {

		TableFieldInterface field;
		JButton button;

		public DugmeListener(TableFieldInterface field, JButton button) {
			this.button = button;
			this.field = field;
			button.addActionListener(this);
		}

		@Override
		public void actionPerformed(ActionEvent e) {
			System.out.println(field.getValues().toString());
		}

	}

}
